# 2025年更新日志

本文档记录了2025年对项目进行的主要更新和改进。

## 文档优化 (2025-10-17)

### README.md 重构
- **结构优化**：使用更清晰的层级结构组织内容
- **格式改进**：
  - 使用GitHub alert blocks（IMPORTANT, CAUTION, TIP, NOTE）提升可读性
  - 将文件说明改为表格格式
  - 优化使用说明的分类和展示
- **内容完善**：
  - 细化使用说明，增加小节分类
  - 改进导入方法说明，使步骤更清晰
  - 重新组织备注部分，分为"书源维护历史"、"替代方案"和"其他说明"
- **链接更新**：将所有旧的仓库链接（ZWolken）更新为新地址（gongfuture）

### 新增文档
- **docs/questions.md**：创建常见问题文档，补全了issue模板中引用的缺失文件
  - 包含导入、使用、登录、搜索等各方面的常见问题
  - 提供详细的问题解决方案

### Issue模板更新
- 更新仓库链接为新地址
- 修复了指向questions.md的链接

### .gitignore 优化
- 移除了对 `docs/websites.md` 的忽略，使其可以被版本控制跟踪

## CI/CD 优化 (2025-10-17)

### GitHub Actions 工作流改进

#### 通用优化
- **Action版本更新**：将 `actions/setup-python@v4` 升级到 `@v5`
- **依赖缓存**：在所有工作流中添加 `cache: 'pip'` 以加快构建速度
- **并发控制**：为所有工作流添加 concurrency 配置，防止重复运行

#### 具体工作流优化

1. **release.yml & pre-release.yml**
   - 添加并发控制（cancel-in-progress: false，确保发布流程完整执行）

2. **dev.yml**
   - 添加并发控制（cancel-in-progress: true，允许取消进行中的开发构建）

3. **update_websites.yml**
   - 优化提交逻辑：使用 `git diff --staged --quiet` 避免空提交
   - 改进提交消息：使用中文描述
   - 简化push命令：使用 `git push` 而非 `git push origin HEAD:main`

4. **stalebot.yml**
   - 放宽时间限制：从7天标记/5天关闭改为30天标记/14天关闭
   - 消息本地化：将所有消息改为中文
   - 添加 `pinned` 标签豁免
   - 修复拼写错误：`exempt-all-assigness` → `exempt-all-assignees`

### Python脚本文档化

为所有Python脚本添加了详细的文档字符串：

1. **booksource_combine.py**
   - 说明脚本的功能和输出
   - 描述合并逻辑

2. **support_websites.py**
   - 说明自动生成文档的流程
   - 描述何时触发

3. **booksource_split.py**
   - 说明拆分功能和使用场景
   - 添加使用说明注释

## 改进总结

### 文档方面
- ✅ 保持了原有语气和风格
- ✅ 优化了内容组织结构
- ✅ 提升了可读性和可维护性
- ✅ 补全了缺失的文档

### CI/CD方面
- ✅ 更新到最新的action版本
- ✅ 提升了构建效率（依赖缓存）
- ✅ 改进了资源利用（并发控制）
- ✅ 优化了自动化流程（避免空提交）
- ✅ 提升了用户体验（中文消息、合理的时间设置）

### 代码质量
- ✅ 为Python脚本添加了详细注释
- ✅ 提升了代码可维护性

## 未来建议

1. **持续监控**：定期检查CI/CD工作流的执行情况
2. **文档更新**：随着项目发展，及时更新questions.md
3. **书源维护**：建议建立书源状态监控机制
4. **社区参与**：鼓励更多贡献者参与维护

---

> 本次更新遵循了"尽可能保留原有语气"和"结构优化"的原则，所有改动都经过仔细考虑。
